
Тема 7.  Работа с файлами (ввод, вывод) 

Отчет по Теме #7 выполнил:

Хорасанлыев Аганяз 

ПИЭ-23-1

| Задание | Лаб_раб | Сам_раб |
|---|---|---|
| Задание 1 |  |  |
| Задание 2 |  |  |
| Задание 3 |  |  |
| Задание 4 |  |  |
| Задание 5 |  |  |
| Задание 6 |  |  |
| Задание 7 |  |  |
| Задание 8 |  |  |
| Задание 9 |  |  |
| Задание 10 |  |  |


**Лабораторная работа №1**
___

**Составьте текстовый файл и положите его в одну директорию с программой на Python. Текстовый файл должен состоять минимум из двух строк.**
```
Horasanlyyev Aganyaz
USUE
```
Результат.

![skriny](https://github.com/Aganyaz62/Python/blob/main/skriny/tema7/lab1.png)

Выводы.

1. В PyCharm, в окне "Project", щелкните правой кнопкой мыши на папке, где нужен файл.
2. Выберите "New" -> "File" (или "Python File").
3. Введите имя файла и нажмите Enter.

**Лабораторная работа №2**
___

**Напишите программу, которая выведет только первую строку из вашего файла, при этом используйте конструкцию open()/close().**

```
f = open('input.txt','r')
print(f.readline())
f.close()
```
Результат.

![skriny](https://github.com/Aganyaz62/Python/blob/main/skriny/tema7/lab2.png)

Выводы.

Эта программа открывает файл "input.txt" для чтения, выводит в консоль первую строчку из него, а потом закрывает файл.

**Лабораторная работа №3**
___

**3)Напишите программу, которая выведет все строки из вашего файла в массиве, при этом используйте конструкцию open()/close().**

```
f = open('input.txt','r')
print(f.readlines())
f.close()
```

Результат.
![skriny](https://github.com/Aganyaz62/Python/blob/main/skriny/tema7/lab3.png)

Выводы.

 Программа открывает файл "input.txt" для чтения, считывает все строки из него в виде списка и выводит этот список в консоль, после чего закрывает файл.
 
**Лабораторная работа №4**
___

**Напишите программу, которая выведет все строки из вашего файла в массиве, при этом используйте конструкцию with open().**

```
with open('input.txt') as f:
    print(f.readlines())
```
Результат.

![skriny](https://github.com/Aganyaz62/Python/blob/main/skriny/tema7/lab4.png)

Выводы.

Программа открывает файл "input.txt", считывает все строки из него в виде списка и выводит этот список в консоль. Файл закрывается автоматически после выполнения.

**Лабораторная работа №5**
___

**Напишите программу, которая выведет каждую строку из вашего файла отдельно, при этом используйте конструкцию with open().**

```
with open('input.txt') as f:
    for line in f:
        print(line)

```

Результат.

![skriny](https://github.com/Aganyaz62/Python/blob/main/skriny/tema7/lab55.png)

Выводы.

Программа построчно читает файл "input.txt" и выводит каждую строку в консоль. Файл автоматически закрывается.


**Лабораторная работа №6**
___

**Напишите программу, которая будет добавлять новую строку в ваш файл, а потом выведет полученный файл в консоль. Вывод можно осуществлять любым способом. Обязательно проверьте сам файл, чтобы изменения в нем тоже отображались.**

```
with open('input.txt', 'a+') as f:
    f.write('\nIm additional line')

with open('input.txt', 'r') as f:
    result=f.readlines()
    print(result)

```

Результат.

![skriny](https://github.com/Aganyaz62/Python/blob/main/skriny/tema7/lab6.png)


Выводы.
Программа сначала добавляет новую строку "Im additional line" в файл "input.txt". Затем она считывает все строки из этого файла и выводит их в виде списка в консоль.

**Лабораторная работа №7**
___

**Напишите программу, которая перепишет всю информацию, которая была у вас в файле до этого, например напишет любые данные из произвольно вами составленного списка. Также не забудьте проверить что измененная вами информация сохранилась в файле.**

```
lines = ['one','two','three']
with open('input.txt','w') as f:
    for line in lines:
        f.write('\nCycle run ' + line)
    print('Done!')

```

Результат.

![skriny](https://github.com/Aganyaz62/Python/blob/main/skriny/tema7/lab7.png)

Выводы.

Программа  перезаписывает файл "input.txt", построчно записывает в него строки "Cycle run one", "Cycle run two", "Cycle run three" каждая на новой строке, и в конце выводит сообщение "Done!".

**Лабораторная работа №8**
___

**Выберите любую папку на своем компьютере, имеющую вложенные директории. Выведите на печать в терминал ее содержимое, как и всех подкаталогов при помощи функции print_docs(directory).**

```
import os

def print_docs(directory):
    all_files = os.walk(directory)
    for catalog in all_files:
        print(f'Папка {catalog[0]} содержит:')
    print(f'Директории:{", ".join([folder for folder in catalog[1]])}')
    print(f'Файлы:{", ".join([file for file in catalog[2]])}')
    print('-' * 10)

print_docs("C:\\Users\\Huawei\\Desktop\\Учёба\\3 Курс 1 семестр\\Программная инженерия\\PyCharm")
```

Результат.

![skriny](https://github.com/Aganyaz62/Python/blob/main/skriny/tema7/lab8.png)

Выводы.

Этот код рекурсивно проходит по указанной директории ("C:\\Users\\Huawei\\Desktop\\Учёба\\3 Курс 1 семестр\\Программная инженерия\\PyCharm"), печатая для каждой подпапки:

**Лабораторная работа №9**
___

**Напишите программу с использованием вложенных циклов и одной проверкой внутри них. Самое главное, не забудьте, что нельзя использовать одинаковые имена итерируемых переменных, когда вы используете вложенные циклы.**

```
def longest_words(file):
    with open(file, encoding='utf-8') as f:
        words = f.read().split()
        max_length = len(max(words,key=len))
        for word in words:
            if len(word) == max_length:
                sought_words = word
        if len(sought_words) == 1:
            return sought_words[0]
        return sought_words
print(longest_words('input.txt'))
```

Результат.

![skriny](https://github.com/Aganyaz62/Python/blob/main/skriny/tema7/lab9.png)

Выводы.


Этот код пытается найти самое длинное слово в файле "input.txt" и вернуть его. Вот что он делает по шагам:

1. Открывает файл "input.txt" для чтения, используя кодировку UTF-8 для правильной обработки текста.
2. Читает весь текст из файла и разбивает его на список слов, используя пробелы в качестве разделителей.
3. Использует функцию max с ключом len (длина) чтобы найти самое длинное слово в списке и получить его длину.
4. Перебирает список слов и проверяет, равно ли длина каждого слова максимальной длине.  Если да, то записывает слово в переменную sought_words.
5. Если длина слова, которое было найдено, равна 1, то возвращает только первый символ из слова. Иначе возвращает найденное слово целиком.


**Лабораторная работа №10**
___

**Требуется создать csv-файл «rows_300.csv» со следующими столбцами:
№ - номер по порядку (от 1 до 300);
Секунда – текущая секунда на вашем ПК;
Микросекунда – текущая миллисекунда на часах.
Для наглядности на каждой итерации цикла искусственно приостанавливайте скрипт на 0,01 секунды.**

```
import csv
import datetime
import time
with open ('rows_300.csv', 'w', encoding='utf-8', newline='') as f:
    writer = csv.writer(f)
    writer.writerow(['№', 'Секунда', 'Микросекунда'])
    for line in range(1,301):
        writer.writerow([line, datetime.datetime.now().second,
                         datetime.datetime.now().microsecond])
        time.sleep(0.01)
```

Результат.

![skriny](https://github.com/Aganyaz62/Python/blob/main/skriny/tema7/lab10.png)

Выводы.
В итоге, этот скрипт создает CSV-файл "rows\_300.csv" с 300 строками данных, где каждая строка содержит номер строки, текущую секунду и текущую микросекунду, измеренные с небольшой задержкой между каждой записью.


**Самостоятельная работа №1**
___

**Найдите в интернете любую статью (объем статьи не менее 200 слов), скопируйте ее содержимое в файл и напишите программу, которая считает количество слов в текстовом файле и определит самое часто встречающееся слово. Результатом выполнения задачи будет: скриншот файла со статьей, листинг кода, и вывод в консоль, в котором будет указана вся необходимая информация.**

```
import re
from collections import Counter

def analyze_text_file(filepath):

    try:
        with open(filepath, 'r', encoding='utf-8') as file:
            text = file.read()
        text = re.sub(r'[^\w\s]', '', text).lower()
        words = text.split()
        word_count = len(words)
        if word_count == 0:
            return 0, None, None
        word_counts = Counter(words)
        most_common_word = word_counts.most_common(1)[0][0]
        return word_count, most_common_word, word_counts

    except FileNotFoundError:
        print(f"Ошибка: Файл '{filepath}' не найден.")
        return None, None, None

filepath = 'input.txt'
result = analyze_text_file(filepath)
if result:
    word_count, most_common_word, word_counts = result
    print(f"Общее количество слов: {word_count}")
    print(f"Самое часто встречающееся слово: '{most_common_word}'")
    print("\nТоп-10 самых часто встречающихся слов:")
    for word, count in word_counts.most_common(10):
        print(f"{word}: {count}")
else:
    print("Анализ не выполнен из-за ошибки.")


```

Результат.

![skriny](https://github.com/Aganyaz62/Python/blob/main/skriny/tema7/cam1.png)

Выводы.

Этот код на Python подсчитывает количество слов в заданном текстовом файле и определяет наиболее часто встречающееся слово. Вот краткое описание кода:

1. Модули: Импортируются re (для регулярных выражений) и Counter из модуля collections (для подсчета частоты слов).
2. Функция analyze_text_file(filepath):
  •  Принимает путь к файлу.
  •  Читает файл с кодировкой UTF-8.
  •  Удаляет знаки препинания с помощью re.sub и переводит весь текст в нижний регистр.
  •  Разбивает текст на список слов с помощью split().
  •  Вычисляет количество слов с помощью len(words).
  •  Если файл пуст (количество слов равно 0), возвращает 0, None, None.
  •  Подсчитывает частоту каждого слова с помощью Counter(words).
  •  Находит наиболее часто встречающееся слово с помощью word_counts.most_common(1)[0][0].
  •  Возвращает количество слов, наиболее часто встречающееся слово и частоты слов.
  •  Перехватывает исключение FileNotFoundError и выводит сообщение об ошибке, если файл не найден, и возвращает None, None, None.
3. Основная часть:
  •  Определяет путь к файлу (filepath).
  •  Вызывает функцию analyze_text_file для получения результата.
  •  Если результат действителен (ошибка не произошла), выводит количество слов, наиболее часто встречающееся слово и 10 самых часто встречающихся слов.
  •  Если произошла ошибка, выводит сообщение "Анализ не выполнен из-за ошибки.".


**Самостоятельная работа №2**
___
**У вас появилась потребность в ведении книги расходов, посмотрев все существующие варианты вы пришли к выводу что вас ничего не устраивает и нужно все делать самому. Напишите программу для учета расходов. Программа должна позволять вводить информацию о расходах, сохранять ее в файл и выводить существующие данные в консоль. Ввод информации происходит через консоль. Результатом выполнения задачи будет: скриншот файла с учетом расходов, листинг кода, и вывод в консоль, с демонстрацией работоспособности программы.**

```
import csv

def add_expense():
    amount = input("Введите сумму расхода: ")
    description = input("Введите описание расхода: ")

    with open("expenses.csv", "a", newline="", encoding="utf-8") as file:
        writer = csv.writer(file)
        writer.writerow([amount, description])
    print("Расход добавлен.")

def view_expenses():
    try:
        with open("expenses.csv", "r", newline="", encoding="utf-8") as file:
            reader = csv.reader(file)
            for row in reader:
                print(f"Сумма: {row[0]}, Описание: {row[1]}")
    except FileNotFoundError:
        print("Файл с расходами еще не создан.")

while True:
    print("\nМеню:")
    print("1. Добавить расход")
    print("2. Посмотреть расходы")
    print("3. Выход")

    choice = input("Выберите действие: ")

    if choice == "1":
        add_expense()
    elif choice == "2":
        view_expenses()
    elif choice == "3":
        break
    else:
        print("Неверный выбор.")
```

Результат.

![skriny](https://github.com/Aganyaz62/Python/blob/main/skriny/tema7/cam2.png)

Выводы.

1. Функция add_expense():
  •  Запрашивает у пользователя сумму расхода и описание.
  •  Открывает файл expenses.csv в режиме добавления ("a"). Это значит, что новые расходы будут добавлены в конец файла.
  •  Создает объект csv.writer для записи данных в файл в формате CSV.
  •  writer.writerow([amount, description]) добавляет сумму и описание в файл в виде одной строки.
  •  Выводит сообщение "Расход добавлен." (Расход добавлен).

2. Функция view_expenses():
  •  Пытается открыть файл expenses.csv в режиме чтения ("r").
  •  Создает объект csv.reader для чтения данных из файла в формате CSV.
  •  Цикл for row in reader: перебирает каждую строку в файле.
  •  Для каждой строки выводит сумму расхода (row[0]) и описание (row[1]) на экран.
  •  Если возникает ошибка FileNotFoundError (то есть файл expenses.csv не существует), выводит сообщение "Файл с расходами еще не создан." (Файл с расходами еще не создан).

3. Основной цикл (while True):
  •  Предлагает пользователю меню:
    *  1: Добавить расход
    *  2: Посмотреть расходы
    *  3: Выход
  •  Получает выбор пользователя.
  •  В зависимости от выбора пользователя вызывает функции add_expense(), view_expenses() или выходит из цикла.
  •  Если введен неверный выбор, выводит сообщение "Неверный выбор." (Неверный выбор).


**Самостоятельная работа №3**
___

**3)Имеется файл input.txt с текстом на латинице. Напишите программу, которая выводит следующую статистику по тексту: количество букв латинского алфавита; число слов; число строк.
Текст в файле: Beautiful is better than ugly. Explicit is better than implicit. Simple is better than complex.
Complex is better than complicated.
Ожидаемый результат: Input file contains:
108 letters
20 words
4 lines**

```
import re

def analyze_file(filepath):
    try:
        with open(filepath, 'r', encoding='utf-8') as file:
            text = file.read()
        letters = re.findall(r'[a-zA-Z]', text)
        letter_count = len(letters)
        words = text.split()
        word_count = len(words)
        lines = text.splitlines()
        line_count = len(lines)
        print("Input file contains:")
        print(f"{letter_count} letters")
        print(f"{word_count} words")
        print(f"{line_count} lines")

    except FileNotFoundError:
        print(f"Ошибка: Файл '{filepath}' не найден.")

analyze_file('input.txt')

```

Результат.

![skriny](https://github.com/Aganyaz62/Python/blob/main/skriny/tema7/cam3.png)

Выводы.

1. Функция analyze_file(filepath):
  •  Принимает путь к файлу (filepath) в качестве аргумента.
  •  Использует блок try...except для обработки возможных ошибок (например, если файл не найден).
  •  with open(...) as file: открывает файл в режиме чтения ('r') и присваивает его объекту file. encoding='utf-8' используется для правильной обработки символов UTF-8 (важно для разных языков). with гарантирует автоматическое закрытие файла после завершения работы.
  •  text = file.read() считывает всё содержимое файла в переменную text.
  •  letters = re.findall(r'[a-zA-Z]', text): Использует функцию re.findall() и регулярное выражение r'[a-zA-Z]' для поиска всех букв латинского алфавита (верхнего и нижнего регистра) в text. Результат сохраняется в список letters.
  •  letter_count = len(letters): Вычисляет количество элементов в списке letters (то есть, количество букв).
  •  words = text.split(): Разбивает текст на слова, разделяя по пробелам, и сохраняет результат в список words.
  •  word_count = len(words): Вычисляет количество элементов в списке words (то есть, количество слов).
  •  lines = text.splitlines(): Разбивает текст на строки, разделяя по символам новой строки, и сохраняет результат в список lines.
  •  line_count = len(lines): Вычисляет количество элементов в списке lines (то есть, количество строк).
  •  Выводит полученную статистику на экран с помощью функций print.
  •  except FileNotFoundError:: Если файл не найден, выводит сообщение об ошибке: "Ошибка: Файл '{filepath}' не найден.".

**Самостоятельная работа №4**
___

**4)Напишите программу, которая получает на вход предложение, выводит его в терминал, заменяя все запрещенные слова звездочками * (количество звездочек равно количеству букв в слове). Запрещенные слова, разделенные символом пробела, хранятся в текстовом файле input.txt. Все слова в этом файле записаны в нижнем регистре. Программа должна заменить запрещенные слова, где бы они ни встречались, даже в середине другого слова. Замена производится независимо от регистра: если файл input.txt содержит запрещенное слово exam, то слова exam, Exam, ExaM, EXAM и exAm должны быть заменены на ****.
Запрещенные слова:
hello email python the exam wor is
Предложение для проверки:
Hello, world! Python IS the programming language of thE future. My EMAIL is....
PYTHON is awesome!!!!
Ожидаемый результат:
*****, ***ld! ****** ** *** programming language of *** future. My
***** **....
****** ** awesome!!!!**

```
import re

def censor_words(sentence, forbidden_words_file="input.txt"):
    try:
        with open(forbidden_words_file, "r") as f:
            forbidden_words = f.read().lower().split()
    except FileNotFoundError:
        print(f"Ошибка: Файл {forbidden_words_file} не найден.")
        return sentence

    censored_sentence = sentence
    for word in forbidden_words:
        pattern = re.compile(re.escape(word), re.IGNORECASE)
        censored_sentence = pattern.sub("*" * len(word), censored_sentence)
    return censored_sentence

if __name__ == "__main__":

    with open("input.txt") as f:
        sentence = "Hello, world! Python IS the programming language of thE future. My EMAIL is....\nPYTHON is awesome!!!!"
        censored_sentence = censor_words(sentence)
    print(censored_sentence)

```

Результат.

![skriny](https://github.com/Aganyaz62/Python/blob/main/skriny/tema7/cam4.png)

Выводы.

Программа читает список запрещенные из файла, а потом заменяет эти слова в предложении на звездочки, не обращая внимания на регистр букв.


**Самостоятельная работа №5**
___
**Самостоятельно придумайте и решите задачу, которая будет взаимодействовать с текстовым файлом**

```
import re

def add_and_display_contacts(filename="input.txt"):

    name = input("Введите имя нового контакта: ")
    email = input("Введите email нового контакта: ")

    if not re.match(r"[^@]+@[^@]+\.[^@]+", email):
        print("Ошибка: Неверный формат email.")
        return
    try:
        with open(filename, "a") as f:
            f.write(f"{name}:{email}\n")
    except Exception as e:
        print(f"Ошибка при записи в файл: {e}")
        return
    try:
        with open(filename, "r") as f:
            for line in f:
                name, email = line.strip().split(":")
                print(f"Имя: {name} (Email: {email})")
    except FileNotFoundError:
        print("Файл input.txt не найден.")
    except Exception as e:
        print(f"Ошибка при чтении файла: {e}")

if __name__ == "__main__":
    add_and_display_contacts()

```

Результат.

![skriny](https://github.com/Aganyaz62/Python/blob/main/skriny/tema7/cam5.png)

Выводы.

1. Спрашивает имя и email: Узнаёт у тебя имя и адрес электронной почты нового человека.
2. Проверяет email: Убеждается, что email похож на настоящий (есть @ и .). Если email неправильный, заканчивает работу.
3. Записывает в файл: Сохраняет имя и email в файл input.txt в формате Имя:email (каждый контакт на новой строке). Если файла нет, он создастся.
4. Показывает всех: Читает всех людей из файла input.txt и выводит их на экран в формате Имя: Имя (Email: email@example.com). Если файл не найден, сообщает об этом.
